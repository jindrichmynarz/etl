---
short: e-sparqlendpointchunked
type: extractor
color: red
title: SPARQL Endpoint chunked
description: Extracts RDF triples from a SPARQL endpoint based on a list of entities to extract. Suitable for bigger data.
---

<p class="flow-text">
Extractor, allows the user to extract RDF triples from a SPARQL endpoint using a series of <a href="https://www.w3.org/TR/sparql11-query/#construct">CONSTRUCT queries</a> based on an input list of entity IRIs.
It is suitable for bigger data, as it queries the endpoint for descriptions of a limited number of entities at once, creating a separete RDF data chunk from each query.
</p>
<dl class="flow-text">
    <dt>Endpoint URL</dt>
    <dd>URL of the SPARQL endpoint to be queried</dd>
    <dt>MimeType</dt>
    <dd>Some SPARQL endpoint (e.g. DBpedia) return invalid RDF data for the default MIME type and it is necessary to specify another one here.</dd>
    <dt>Chunk size</dt>
    <dd>Number of entities to be queried for at once. This is done by using the <a href="https://www.w3.org/TR/sparql11-query/#inline-data" title="VALUES clause">VALUES clause</a> in the SPARQL query, so this number corresponds to the number of items in the VALUES clause.</dd>
    <dt>Default graph</dt>
    <dd>IRIs of the graphs to be passed as default graphs for the SPARQL query</dd>
    <dt>SPARQL CONSTRUCT query with ${VALUES} placeholder</dt>
    <dd>Query for extraction of triples from the endpoint. At the end of its WHERE clause, it should have the <code>${VALUES}</code> placeholder. This is where the VALUES clause listing the current entities to query is inserted.</dd>
</dl>
<!--more-->
<div class="row" id="characteristics">
    <h3 class="orange-text center">Characteristics</h3>
    <div class="col s12 l6">
        <dl class="flow-text">
            <dt>ID</dt>
            <dd>{{ page.short }}</dd>
            <dt>Type</dt>
            <dd>{{ page.type }}</dd>
            <dt>Inputs</dt>
            <dd>RDF single graph - configuration</dd>
            <dd>Files - Input</dd>
            <dt>Outputs</dt>
            <dd>RDF chunked</dd>
            <dt>Look in pipeline</dt>
            <dd><img class="responsive-img" src="../assets/components/{{page.short}}.png" alt="{{page.title}}"></dd>
            <dt>Sample pipeline</dt>
            <dd><a href="../assets/pipelines/{{page.short}}-1.jsonld">available</a></dd>
        </dl>
    </div>
    <div class="col s12 l6">
        <p class="flow-text">
        The {{page.title}} component queries a remote SPARQL endpoint using a <a href="https://www.w3.org/TR/sparql11-query/#construct">SPARQL CONSTRUCT</a> query.
        It can be configured at runtime using RDF configuration, which can be generated by another component.
        This chunked version of the component is suitable for bigger data, which needs to be queried by parts.
        The typical use case is getting descriptions of a larger number of entities of the same type, which would be too big to get in one query.
        On the input, the component expects a single CSV file containing one column with a header.
        The column header is the name of the variable, which will be used in the SPARQL query as the IRI of the entity, about which the extracted data should be.
        The row then contain the list of IRIs of these entities.
        The list is split into pieces determined by the Chunk size parameter and each piece is inserted into the query using a VALUES clause in place of the <code>${VALUES}</code> placeholder, forming one RDF data chunk on the output.
        The input list of entities can be created either manually, or using the <a href="./e-sparqlendpointselect" title="SPARQL endpoint select">SPARQL endpoint select</a> or <a href="./e-sparqlendpointselectscrollablecursor" title="SPARQL endpoint select scrollable cursor">SPARQL endpoint select scrollable cursor</a> components.
    </div>
</div>
<div class="row" id="runtimeconfig">
<h3 class="orange-text center">Runtime configuration</h3>
<p class="flow-text">Below you can see sample runtime configuration for the component, which includes specification of default graph IRIs.
You can also import a <a href="../assets/pipelines/{{page.short}}-1.jsonld">sample pipeline</a>.
Note that <a href="https://www.w3.org/TR/rdf11-concepts/#section-blank-nodes" title="Blank nodes">RDF blank nodes</a> are not allowed in runtime configurations.
</p>
{% highlight turtle %}
@prefix sp: <http://plugins.linkedpipes.com/ontology/e-sparqlEndpointChunked#> .

<http://localhost/configuration> a sp:Configuration ;
    sp:chunkSize 4000 ;
    sp:endpoint "http://ruian.linked.opendata.cz:8890/sparql" ;
    sp:query """CONSTRUCT {?point a <http://www.opengis.net/ont/gml#Point>; <http://www.opengis.net/ont/gml#pos> ?o .} WHERE 
{
?point  a <http://www.opengis.net/ont/gml#Point>; <http://www.opengis.net/ont/gml#pos> ?o . 
${VALUES}
}""".
{% endhighlight %}
</div>